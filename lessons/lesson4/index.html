<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููู ุงูููุณุฑ - ุงูุฎูุน ูุงูุทูุงู</title>

    <!-- ุงูุฎุทูุท -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#16213e',
                        gold: '#e2b96f',
                        creamy: '#faf8f3',
                        trait1: '#f0fdf4', trait2: '#eff6ff', trait3: '#fdf2f8', trait4: '#fffbeb',
                        trait5: '#f5f3ff', trait6: '#ecfdf5', trait7: '#fff1f2', trait8: '#f0f9ff'
                    },
                    fontFamily: {
                        amiri: ['Amiri', 'serif'],
                        tajawal: ['Tajawal', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom CSS -->
    <style>
        body { background-color: #faf8f3; font-family: 'Tajawal', sans-serif; color: #16213e; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e2b96f; border-radius: 10px; }
        
        .glass-panel { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(226, 185, 111, 0.3); box-shadow: 0 8px 32px 0 rgba(22, 33, 62, 0.05); }
        .verse { font-family: 'Amiri', serif; color: #e2b96f; text-align: center; font-size: 1.25rem; line-height: 2; padding: 1rem; background: #16213e; border-radius: 0.5rem; margin: 1rem 0; border: 1px solid #e2b96f; }
        
        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounceSlight { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 0 0 rgba(226, 185, 111, 0.4); } 50% { box-shadow: 0 0 15px 5px rgba(226, 185, 111, 0.2); } }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .animate-slide-up { animation: slideUp 0.5s ease-out forwards; }
        .animate-bounce-slight { animation: bounceSlight 3s infinite ease-in-out; }
        .animate-pulse-glow { animation: pulseGlow 2s infinite; }

        /* Flip Card */
        .flip-card { perspective: 1000px; height: 250px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 1.5rem; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .flip-card-front { background-color: #16213e; color: #e2b96f; border: 2px solid #e2b96f; font-family: 'Amiri', serif; font-size: 1.5rem; }
        .flip-card-back { background-color: #faf8f3; color: #16213e; border: 2px solid #16213e; transform: rotateY(180deg); font-size: 1.1rem; line-height: 1.6; }

        /* Mind Map */
        .map-root { background: #16213e; color: #e2b96f; border: 2px solid #e2b96f; }
        .map-branch { background: white; border: 1px solid #16213e; position: relative; }
        .map-branch::before { content: ''; position: absolute; top: -1.5rem; left: 50%; width: 2px; height: 1.5rem; background: #e2b96f; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // 1. DATA (ุงููุงุฏุฉ ุงูุนูููุฉ)
        // ==========================================
        
        const TOPICS_DATA = [
            {
                id: 1, title: 'ุงูุฎูุน: ูุนูุงู ูุฃุฏูุฉ ูุดุฑูุนูุชู', bg: 'trait1',
                content: <div className="space-y-4">
                    <p><strong>ุงูุฎูููุนู ูุบุฉู:</strong> ูุฃุฎูุฐ ูู ุฎูุน ุงูุซูุจุ ูุฃู ููุงู ูู ุงูุฒูุฌูู ูุจุงุณ ููุขุฎุฑ.</p>
                    <p><strong>ุดุฑุนุงู:</strong> ููุฑูููุฉ ุชุฌุฑู ุจูู ุงูุฒูุฌูู ุนูู ุนูุถ ุชุฏูุนู ุงููุฑุฃุฉ ูุฒูุฌูุงุ ุจุฃููุงุธ ูุฎุตูุตุฉ.</p>
                    <div className="verse">๏ดฟููุฅููู ุฎูููุชููู ุฃููููุง ูููููููุง ุญูุฏููุฏู ุงูููููู ููููุง ุฌูููุงุญู ุนูููููููููุง ูููููุง ุงููุชูุฏูุชู ุจููู๏ดพ</div>
                    <p><strong>ุงูุฏููู ูู ุงูุณูุฉ:</strong> ูุตุฉ ุงูุฑุฃุฉ ุซุงุจุช ุจู ููุณ ุงูุชู ูุงูุช ูููุจู ๏ทบ: "ูุง ุฃุนุชุจ ุนููู ูู ุฎูู ููุง ุฏููุ ููููู ุฃูุฑู ุงูููุฑ ูู ุงูุฅุณูุงู". ูุฃูุฑูุง ุงููุจู ๏ทบ ุจุฑุฏ ุงูุญุฏููุฉ ูุฃูุฑู ุจุชุทููููุง.</p>
                </div>,
                activity: { type: 'fill', question: 'ุงูุฎูุน ุดุฑุนุงู ูู ูุฑูุฉ ุชุฌุฑู ุจูู ุงูุฒูุฌูู ุนูู ..... ุชุฏูุนู ุงููุฑุฃุฉ ูุฒูุฌูุง.', answer: 'ุนูุถ' }
            },
            {
                id: 2, title: 'ุฃุญูุงู ุงูุฎูุน ูุงูุญููุฉ ููู', bg: 'trait2',
                content: <div className="space-y-4">
                    <ul className="list-disc list-inside space-y-2 leading-relaxed">
                        <li>ุฌุงุฆุฒ ูุณูุก ุงูุนุดุฑุฉุ ููุง ููุน ุฅูุง ุจู <strong>ุนูุถ ูุงูู</strong>.</li>
                        <li>ูุง ููุน ูู ุบูุฑ ุงูุฑุดูุฏุฉ (ูููุต ุฃูููุชูุง).</li>
                        <li>ุฅุฐุง ุฎุงูุน ุงูุฑุฌู ุงูุฑุฃุชู ูููุช ุฃูุฑ ููุณูุงุ <strong>ููุง ุฑุฌุนุฉ ูู ุนูููุง</strong> ุฅูุง ุจุนูุฏ ุฌุฏูุฏ.</li>
                        <li>ูุง ููุญู ุงููุฎุงูุนุฉ ุทูุงู ุฃู ุธูุงุฑ ุฃุซูุงุก ุนุฏุชูุง (ูุฃููุง ุตุงุฑุช ุฃุฌูุจูุฉ).</li>
                        <li><strong>ูุฌูุฒ ุงูุฎูุน ูู ุงูุญูุถ</strong> ุจุฎูุงู ุงูุทูุงูุ ูุนุฏู ุงูุถุฑุฑ ุจุชุทููู ุงูุนุฏุฉ.</li>
                        <li>ููุญุฑู ุนูู ุงูุฒูุฌ ุงูุฅุถุฑุงุฑ ุจุฒูุฌุชู ูุชูุชุฏู ููุณูุง (ุฅูุง ุฃู ุชุฃุชูู ุจูุงุญุดุฉ ูุจููุฉ).</li>
                    </ul>
                    <p className="mt-4 font-bold text-navy">ุงูุญููุฉ ููู:</p>
                    <p>ุฅุฐุง ุณุงุกุช ุงูุนุดุฑุฉ ููุฑูุช ุงููุฑุฃุฉ ุฎูู ุฒูุฌูุง ุฃู ุฏููู ูุฎุงูุช ุงูุฅุซู ุจุชุฑู ุญููุ ูุจุงุญ ููุง ุทูุจ ุงููุฑุงู ุนูู ุนูุถ ุชุจุฐูู ูุชูุชุฏู ุจู ููุณูุง.</p>
                </div>,
                activity: { type: 'match', pairs: [{ q: 'ุงูุฑุฌุนุฉ ูููุฎุงูุนุฉ', a: 'ูุง ุชุตุญ' }, { q: 'ุงูุฎูุน ููุช ุงูุญูุถ', a: 'ูุฌูุฒ' }] }
            },
            {
                id: 3, title: 'ุงูุทูุงู: ุชุนุฑููู ูุญููู', bg: 'trait3',
                content: <div className="space-y-4">
                    <p><strong>ุงูุทูุงู ูุบุฉ:</strong> ุงูุชุฎููุฉุ ููุงู: ุทููุช ุงููุงูุฉ ุฅุฐุง ุณุฑุญุช.</p>
                    <p><strong>ุดุฑุนุงู:</strong> ุญู ููุฏ ุงูููุงุญ ุฃู ุจุนุถู.</p>
                    <p><strong>ูู ูุตุญ ุทูุงูู:</strong> ูุตุญ ูู ุงูุฒูุฌ ุงูุจุงูุบ ุงูุนุงูู ุงููุฎุชุงุฑ. ููุง ููุน ุทูุงู (ุงูุตุจูุ ุงููุฌูููุ ุงูุณูุฑุงูุ ุงูููุฑูุ ูุงูุบุถุจุงู ุบุถุจุงู ุดุฏูุฏุงู ูุง ูุฏุฑู ูุง ูููู).</p>
                    <div className="verse">๏ดฟููุง ุฃููููููุง ุงููููุจูููู ุฅูุฐูุง ุทููููููุชููู ุงููููุณูุงุกู ููุทูููููููููููู ููุนูุฏููุชูููููู๏ดพ</div>
                    <p><strong>ุญููู:</strong> ุงูุฃุตู ููู ุงูุฅุจุงุญุฉ ูููุตูุญุฉุ ููููุฑู ูุบูุฑ ุญุงุฌุฉุ ููุฌุจ ููุถุฑุฑ ุงููุจุฑุญุ ููุญุฑู ูู ุงูุจุฏุนู.</p>
                </div>,
                activity: { type: 'fill', question: 'ูุง ููุน ุงูุทูุงู ูู ุงูุบุถุจุงู ุบุถุจุงู ุดุฏูุฏุงู ูุง ูุฏุฑู ูุง .....', answer: 'ูููู' }
            },
            {
                id: 4, title: 'ุฃููุงุธ ุงูุทูุงู', bg: 'trait4',
                content: <div className="space-y-4">
                    <p>ุฃููุงุธ ุงูุทูุงู ุชููุณู ุฅูู ูุณููู:</p>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="p-4 bg-white rounded-xl border-t-4 border-gold">
                            <h4 className="font-bold font-amiri text-lg mb-2">1. ุฃููุงุธ ุตุฑูุญุฉ</h4>
                            <p>ุงูุชู ูุง ุชุญุชูู ุบูุฑู (ูุซู: ุทููุชูุ ุฃูุช ุทุงูู). <br/><strong>ุญููู:</strong> ููุน ุจูุง ุงูุทูุงู ูุฅู ูู ูููู (ุณูุงุก ูุงู ุฌุงุฏุงู ุฃู ูุงุฒูุงู).</p>
                        </div>
                        <div className="p-4 bg-white rounded-xl border-t-4 border-navy">
                            <h4 className="font-bold font-amiri text-lg mb-2">2. ุฃููุงุธ ููุงูุฉ</h4>
                            <p>ุชุญุชูู ุงูุทูุงู ูุบูุฑู (ูุซู: ุฃูุช ุฎููุฉุ ุงูุญูู ุจุฃููู). <br/><strong>ุญููู:</strong> ูุง ููุน ุจูุง ุงูุทูุงู ุฅูุง ุจู <strong>ููุฉ</strong> ุฃู ูุฑููุฉ ุฏุงูุฉ.</p>
                        </div>
                    </div>
                </div>,
                activity: { type: 'match', pairs: [{ q: 'ุฃูุช ุทุงูู', a: 'ููุธ ุตุฑูุญ' }, { q: 'ุงูุญูู ุจุฃููู', a: 'ููุธ ููุงูุฉ' }] }
            },
            {
                id: 5, title: 'ุทูุงู ุงูุณูุฉ ูุงูุทูุงู ุงูุจุฏุนู', bg: 'trait5',
                content: <div className="space-y-4">
                    <div className="bg-green-50 p-4 rounded-xl">
                        <h4 className="font-bold text-green-800 mb-2">ุทูุงู ุงูุณูุฉ</h4>
                        <p>ููู ุงููุฃุฐูู ููู ุดุฑุนุงู. ููููู ุจุฃู ูุทูููุง <strong>ุทููุฉ ูุงุญุฏุฉ</strong>ุ ูู <strong>ุทูุฑ ูู ูุฌุงูุนูุง ููู</strong>ุ ููุชุฑููุง ุญุชู ุชููุถู ุนุฏุชูุง.</p>
                    </div>
                    <div className="bg-red-50 p-4 rounded-xl">
                        <h4 className="font-bold text-red-800 mb-2">ุงูุทูุงู ุงูุจุฏุนู</h4>
                        <p>ุงููุญุฑู ุงููููู ุนูู. ููููู ุจุฃูุฑูู:</p>
                        <ol className="list-decimal list-inside mt-2">
                            <li><strong>ูู ุงูุนุฏุฏ:</strong> ุฃู ูุทูููุง ุซูุงุซุงู ุจููุธ ูุงุญุฏ (ุฃูุช ุทุงูู ุซูุงุซุงู).</li>
                            <li><strong>ูู ุงูููุช:</strong> ุฃู ูุทูููุง ูู ุงูุญูุถุ ุฃู ูู ุทูุฑ ุฌุงูุนูุง ููู ููู ูุชุจูู ุญูููุง.</li>
                        </ol>
                        <p className="mt-2 font-bold text-sm">ุญููู: ูุญุฑู ููุฃุซู ูุงุนููุ ููููู ููุน ูุชูุญุณุจ ุทููุฉ.</p>
                    </div>
                </div>,
                activity: { type: 'fill', question: 'ุงูุทูุงู ูู ุทูุฑ ุฌุงูุนูุง ููู ูุนุชุจุฑ ุทูุงูุงู .....', answer: 'ุจุฏุนูุง' }
            },
            {
                id: 6, title: 'ุงูุฑุฌุนุฉ: ูุนูุงูุง ูุดุฑูุทูุง', bg: 'trait6',
                content: <div className="space-y-4">
                    <p><strong>ุงูุฑุฌุนุฉ ูุบุฉ:</strong> ุงููุฑุฉ ูู ุงูุฑุฌูุน. <br/><strong>ุดุฑุนุงู:</strong> ุฅุนุงุฏุฉ ุฒูุฌุชู ุงููุทููุฉ ุทูุงูุงู ุบูุฑ ุจุงุฆู ุฅูู ูุง ูุงูุช ุนููู ูุจู ุงูุทูุงู ุจุฏูู ุนูุฏ.</p>
                    <div className="verse">๏ดฟููุจูุนููููุชูููููู ุฃูุญูููู ุจูุฑูุฏููููููู ููู ุฐููููู ุฅููู ุฃูุฑูุงุฏููุง ุฅูุตูููุงุญูุง๏ดพ</div>
                    <p className="font-bold text-navy mt-4">ุดุฑูุท ุตุญุฉ ุงูุฑุฌุนุฉ:</p>
                    <ul className="list-disc list-inside space-y-1">
                        <li>ุฃู ูููู ุงูุทูุงู ุฏูู ุงูุซูุงุซ (ุงูุทููุฉ ุงูุฃููู ุฃู ุงูุซุงููุฉ).</li>
                        <li>ุฃู ุชููู ุงููุทููุฉ ูุฏุฎููุงู ุจูุง (ุบูุฑ ุงููุฏุฎูู ุจูุง ูุง ุนุฏุฉ ููุง ูุชุจูู ููุฑุงู).</li>
                        <li>ุฃู ูููู ุงูุทูุงู ุจุบูุฑ ุนูุถ (ุงูุฎูุน ูุง ุฑุฌุนุฉ ููู).</li>
                        <li>ุฃู ุชููู ุงูุฑุฌุนุฉ ูู ุงูุนุฏุฉ.</li>
                        <li>ุฃู ุชููู ุงูุฑุฌุนุฉ ููุฌุฒุฉ ุบูุฑ ูุนููุฉ ุนูู ุดุฑุท.</li>
                    </ul>
                </div>,
                activity: { type: 'match', pairs: [{ q: 'ุทููุฉ ุซุงูุซุฉ', a: 'ูุง ุชุตุญ ุงูุฑุฌุนุฉ' }, { q: 'ุทููุฉ ุฃููู ุจุงูุนุฏุฉ', a: 'ุชุตุญ ุงูุฑุฌุนุฉ' }] }
            },
            {
                id: 7, title: 'ุฃุญูุงู ุงูุฑุฌุนุฉ', bg: 'trait7',
                content: <div className="space-y-4">
                    <p><strong>ุจู ุชุญุตู ุงูุฑุฌุนุฉุ</strong> ุชุญุตู ุจุงูููุธ (ุฑุงุฌุนุช ุงูุฑุฃุชู)ุ ุฃู ุจุงููุทุก ุฅุฐุง ููู ุงูุฑุฌุนุฉ.</p>
                    <p className="font-bold text-navy mt-4">ูู ุฃุญูุงููุง:</p>
                    <ul className="list-disc list-inside space-y-2">
                        <li>ุงููุทููุฉ ุฑุฌุนูุงู ุฒูุฌุฉ ูุง ุฏุงูุช ูู ุงูุนุฏุฉุ ููุง ุงููููุฉ ูุงูุณููุ ููุง ุชุฎุฑุฌ ูู ุจูุชูุง.</li>
                        <li>ูุง ููุดุชุฑุท ุฑุถุง ุงููุฑุฃุฉ ุฃู ููููุง ูุตุญุฉ ุงูุฑุฌุนุฉ.</li>
                        <li>ุฅุฐุง ุงูุชูุช ุงูุนุฏุฉ (ุจุซูุงุซ ุญูุถุงุช) ููู ูุฑุชุฌุนูุงุ ุจุงูุช ููู ุจููููุฉ ุตุบุฑูุ ููุง ุชุญู ุฅูุง ุจุนูุฏ ุฌุฏูุฏ.</li>
                        <li>ุฅุฐุง ุงุณุชููู ุงูุทููุงุช ุงูุซูุงุซุ ุจุงูุช ุจููููุฉ ูุจุฑูุ ููุง ุชุญู ูู ุญุชู ุชููุญ ุฒูุฌุงู ุบูุฑู ููุงุญุงู ุตุญูุญุงู ููุทุฃูุง ุซู ููุงุฑููุง.</li>
                    </ul>
                </div>,
                activity: { type: 'fill', question: 'ุฅุฐุง ุงูุชูุช ุงูุนุฏุฉ ููู ูุฑุงุฌุนูุง ุจุงูุช ููู ุจููููุฉ .....', answer: 'ุตุบุฑู' }
            }
        ];

        const FLASHCARDS = [
            { front: "ุงูุฎูุน (ุดุฑุนุงู)", back: "ูุฑูุฉ ุชุฌุฑู ุจูู ุงูุฒูุฌูู ุนูู ุนูุถ ุชุฏูุนู ุงููุฑุฃุฉ ูุฒูุฌูุง." },
            { front: "ุงูุทูุงู (ุดุฑุนุงู)", back: "ุญู ููุฏ ุงูููุงุญ ุฃู ุจุนุถู." },
            { front: "ุทูุงู ุตุฑูุญ", back: "ููุธ ูุง ูุญุชูู ุบูุฑ ุงูุทูุงูุ ููุน ูุฅู ูู ูููู ููููู (ุฃูุช ุทุงูู)." },
            { front: "ุทูุงู ููุงูุฉ", back: "ููุธ ูุญุชูู ุงูุทูุงู ูุบูุฑูุ ูุง ููุน ุฅูุง ุจููุฉ ููููู (ุงูุญูู ุจุฃููู)." },
            { front: "ุทูุงู ุงูุณูุฉ", back: "ุทููุฉ ูุงุญุฏุฉ ูู ุทูุฑ ูู ูุฌุงูุนูุง ููู." },
            { front: "ุทูุงู ุงูุจุฏุนุฉ", back: "ุทูุงู ูู ุงูุญูุถุ ุฃู ูู ุทูุฑ ุฌุงูุน ูููุ ุฃู ุซูุงุซ ุจููุธ ูุงุญุฏ." },
            { front: "ุงูุฑุฌุนุฉ", back: "ุฅุนุงุฏุฉ ุฒูุฌุชู ุงููุทููุฉ ุทูุงูุงู ุบูุฑ ุจุงุฆู ุจุฏูู ุนูุฏ ูู ููุช ุงูุนุฏุฉ." },
            { front: "ุทูุงู ุงูุบุถุจุงู", back: "ูุง ููุน ุฅุฐุง ูุงู ุดุฏูุฏุงู ูุง ูุฏุฑู ูุง ูููู." },
            { front: "ุงูุฎูุน ูู ุงูุญูุถ", back: "ูุฌูุฒ ููุง ุจุฃุณ ุจู ูุนุฏู ุงูุถุฑุฑ." },
            { front: "ุทูุงู ุบูุฑ ุงููุฏุฎูู ุจูุง", back: "ูุง ุนุฏุฉ ููุงุ ูุชุจูู ุจูุฌุฑุฏ ุงูุทูุงู ููุง ุฑุฌุนุฉ ููุง." },
            { front: "ุงูุจููููุฉ ุงูุตุบุฑู", back: "ุงูุชูุงุก ุงูุนุฏุฉ ูุจู ุงูุฑุฌุนุฉุ ุชุญู ูู ุจุนูุฏ ูููุฑ ุฌุฏูุฏูู." },
            { front: "ุงูุจููููุฉ ุงููุจุฑู", back: "ุงุณุชููุงุก ุซูุงุซ ุทููุงุชุ ูุง ุชุญู ูู ุญุชู ุชููุญ ุฒูุฌุงู ุบูุฑู." },
            { front: "ุนูุถ ุงูุฎูุน", back: "ุฑูู ุฃุณุงุณูุ ููุง ูุตุญ ุงูุฎูุน ุจุฏููู." },
            { front: "ุฑุถุง ุงูุฒูุฌุฉ ูู ุงูุฑุฌุนุฉ", back: "ูุง ูุดุชุฑุทุ ูุงูุฒูุฌ ุฃุญู ุจุฑุฏูุง ูุง ุฏุงูุช ุจุงูุนุฏุฉ." },
            { front: "ุงููุทููุฉ ุฑุฌุนูุงู", back: "ุชุนุชุจุฑ ุฒูุฌุฉุ ุชุจูู ูู ุงูุจูุช ูููุง ุงููููุฉ ูุงูุณููู." }
        ];

        const ESSAY_QUESTIONS = [
            { q: "ูุง ูู ุงูุฎูุนุ ููุง ุญูู ุทูููุจููู ูู ุบูุฑ ุณุจุจุ", a: "ุงูุฎูุน ูู ูุฑุงู ุงูุฒูุฌุฉ ูุฒูุฌูุง ุนูู ุนูุถ ูุงูู ุชุฏูุนู ูู. ูููุฑู ูููุฑุฃุฉ ุทูุจู ูู ุบูุฑ ุณุจุจ ูููุน (ูุฃู ุชูุฑู ุฎููู ุฃู ุฏููู ูุชุฎุงู ุฃูุง ุชุคุฏู ุญูู)." },
            { q: "ูุง ุงููุฑู ุจูู ุงูุทูุงู ุงูุตุฑูุญ ูุงูููุงูุฉุ", a: "ุงูุตุฑูุญ: ููุธ ููุถูุน ููุทูุงู ูุง ูุญุชูู ุบูุฑู (ุทููุชู) ูููุน ุจูุง ููุฉ. ุงูููุงูุฉ: ููุธ ูุญุชูู ุงูุทูุงู ูุบูุฑู (ุงุฎุฑุฌู) ููุง ููุน ุฅูุง ุจูุฌูุฏ ุงูููุฉ." },
            { q: "ูุง ูู ุดุฑูุท ุทูุงู ุงูุณูุฉุ", a: "1- ุฃู ูููู ุทููุฉ ูุงุญุฏุฉ. 2- ุฃู ูููุนู ูู ุทูุฑ ูู ูุฌุงูุนูุง ููู. 3- ุฃู ูุชุฑููุง ุญุชู ุชููุถู ุนุฏุชูุง." },
            { q: "ูุง ุญูู ุฅููุงุน ุงูุทูุงู ุงูุจุฏุนูุ ููู ููุนุ", a: "ุญููู ูุญุฑู ููุฃุซู ุงูุฒูุฌ ุจูุนููุ ููููู ููุน ุดุฑุนุงู ูุชูุญุณุจ ุทููุฉ (ุญุณุจ ุฑุฃู ุงูุฌูููุฑ)." },
            { q: "ูุง ูู ุดุฑูุท ุตุญุฉ ุงูุฑุฌุนุฉุ", a: "ุฃู ูููู ุงูุทูุงู ุฏูู ุงูุซูุงุซุ ูุฃู ุชููู ูุฏุฎููุงู ุจูุงุ ูุฃู ูููู ุงูุทูุงู ุจูุง ุนูุถ (ููุณ ุฎูุนุงู)ุ ูุฃู ุชููู ุงูุฑุฌุนุฉ ุฃุซูุงุก ุงูุนุฏุฉ." },
            { q: "ูู ูุดุชุฑุท ูุนูุฏ ุงูุฑุฌุนุฉ ุฑุถุง ุงููุฑุฃุฉ ุฃู ูุฌูุฏ ูููุ", a: "ูุง ูุดุชุฑุท ุฑุถุง ุงููุฑุฃุฉ ููุง ููููุงุ ุจู ุงูุฒูุฌ ุฃุญู ุจุฑุฏูุง ูุชู ุดุงุก ุฃุซูุงุก ุงูุนุฏุฉ ููููู ุชุนุงูู: (ูุจุนููุชูู ุฃุญู ุจุฑุฏูู ูู ุฐูู)." },
            { q: "ูุง ุงููุฑู ุจูู ุงูุจููููุฉ ุงูุตุบุฑู ูุงููุจุฑูุ", a: "ุงูุตุบุฑู: ุงููุถุงุก ุงูุนุฏุฉ ูู ุทููุฉ ุฃู ุงุซูุชููุ ุชุญู ูู ุจุนูุฏ ูููุฑ ุฌุฏูุฏูู. ุงููุจุฑู: ุทูุงู ุซูุงุซุ ูุง ุชุญู ูู ุฃุจุฏุงู ุญุชู ุชุชุฒูุฌ ุฑุฌูุงู ุขุฎุฑ ุฒูุงุฌ ุฑุบุจุฉ ููุฏุฎู ุจูุง ุซู ููุงุฑููุง." },
            { q: "ูุง ุญูู ุฎุฑูุฌ ุงููุทููุฉ ุฑุฌุนูุงู ูู ุจูุช ุฒูุฌูุงุ", a: "ูุง ูุฌูุฒ ููุง ุงูุฎุฑูุฌ ููุง ูุฌูุฒ ููุฒูุฌ ุฅุฎุฑุงุฌูุงุ ูุฃููุง ูุง ุชุฒุงู ูู ุญูู ุงูุฒูุฌุฉ ูููุง ุงููููุฉ ูุงูุณูููุ ูุนู ุงููู ูุญุฏุซ ุจุนุฏ ุฐูู ุฃูุฑุง." },
            { q: "ูู ููุน ุทูุงู ุงูููุฑู ูุงูุณูุฑุงูุ", a: "ูุง ููุน ุทูุงู ุงูููุฑู ูุนุฏู ุงูุฅุฑุงุฏุฉุ ููุง ุงูุณูุฑุงู ุบูุฑ ุงููููุฒุ ููุง ุงูุบุถุจุงู ุบุถุจุงู ุดุฏูุฏุงู ุฃููุฏู ุงูุฅุฏุฑุงู." },
            { q: "ุจู ุชุญุตู ุงูุฑุฌุนุฉ ูููุทููุฉุ", a: "ุชุญุตู ุงูุฑุฌุนุฉ ุจุงูููู ุงูุตุฑูุญ (ุฑุงุฌุนุชู)ุ ูุชุญุตู ุจุงููุนู ูุงููุทุก ุฅุฐุง ููู ุจู ุงูุฑุฌุนุฉ." }
        ];

        const QUIZ_QUESTIONS = [
            { q: "ูุฑูุฉ ุชุฌุฑู ุจูู ุงูุฒูุฌูู ุนูู ุนูุถ ุชุฏูุนู ุงููุฑุฃุฉ ูุฒูุฌูุง ุชุณูู:", options: ["ุงูุทูุงู", "ุงูุฎูุน", "ุงูุธูุงุฑ", "ุงููุนุงู"], answer: 1 },
            { q: "ุฅุฐุง ุฎุงูุน ุงูุฑุฌู ุงูุฑุฃุชู ูุฅููุง:", options: ["ุชุจูู ููู ุจููููุฉ ุตุบุฑู", "ูู ุญู ุฑุฌุนุชูุง ุจุงูุนุฏุฉ", "ุชุจูู ูุจุฑู", "ุชุจูู ุฒูุฌุฉ"], answer: 0 },
            { q: "ุฅููุงุน ุงูุฎูุน ูู ูุชุฑุฉ ุญูุถ ุงููุฑุฃุฉ:", options: ["ูุญุฑู", "ููุฑูู", "ุฌุงุฆุฒ", "ุจุงุทู"], answer: 2 },
            { q: "ูู ุฃููุงุธ ุงูุทูุงู ุงูุตุฑูุญุฉ ุงูุชู ูุง ุชุญุชุงุฌ ุฅูู ููุฉ:", options: ["ุฃูุช ุฎููุฉ", "ุงูุญูู ุจุฃููู", "ุฃูุช ุทุงูู", "ุงุฎุฑุฌู ูู ุงูุจูุช"], answer: 2 },
            { q: "ููุธ (ุงูุญูู ุจุฃููู) ูุนุชุจุฑ:", options: ["ุทูุงูุงู ุตุฑูุญุงู", "ุฎูุนุงู", "ุทูุงู ููุงูุฉ ูุง ููุน ุฅูุง ุจููุฉ", "ูุง ูุนุชุจุฑ ุดูุฆุงู"], answer: 2 },
            { q: "ุทูุงู ุงูููุฑู ูุงูุบุถุจุงู ุงูุฐู ูุง ูุนู ูุง ูููู:", options: ["ููุน", "ูุง ููุน", "ููุน ุทููุฉ ุฑุฌุนูุฉ", "ููู ุชูุตูู"], answer: 1 },
            { q: "ุฃู ูุทูู ุงูุฑุฌู ุงูุฑุฃุชู ูู ุทูุฑ ูู ูุฌุงูุนูุง ููู ุทููุฉ ูุงุญุฏุฉุ ูุฐุง ุทูุงู:", options: ["ุจุฏุนู", "ุณูู", "ููุงูุฉ", "ุฎูุน"], answer: 1 },
            { q: "ุชุทููู ุงููุฑุฃุฉ ููู ุญุงุฆุถ ูุนุชุจุฑ ุทูุงูุงู:", options: ["ุณููุงู", "ุจุฏุนูุงู ูุญุฑูุงู", "ูุณุชุญุจุงู", "ูุจุงุญุงู"], answer: 1 },
            { q: "ุงูุทูุงู ุซูุงุซุงู ุจููุธ ูุงุญุฏ (ุฃูุช ุทุงูู ุจุงูุซูุงุซ):", options: ["ุทูุงู ุณูู", "ุทูุงู ุจุฏุนู", "ูุณุชุญุจ", "ูุง ููุน"], answer: 1 },
            { q: "ุงููุทููุฉ ุทูุงูุงู ุฑุฌุนูุงู ูุง ุฏุงูุช ูู ุงูุนุฏุฉ:", options: ["ุชุฎุฑุฌ ูุฃูููุง", "ููุณ ููุง ูููุฉ", "ุชุนุชุจุฑ ุฒูุฌุฉ ููุง ุณูู ููููุฉ", "ุชุจูู ููุฑุงู"], answer: 2 },
            { q: "ูุดุชุฑุท ูุตุญุฉ ุงูุฑุฌุนุฉ ุฃู ุชููู ุงููุฑุฃุฉ:", options: ["ูุฏุฎููุงู ุจูุง", "ุบูุฑ ูุฏุฎูู ุจูุง", "ูุฎุชูุนุฉ", "ุงูุชูุช ุนุฏุชูุง"], answer: 0 },
            { q: "ุฅุฐุง ุงููุถุช ุนุฏุฉ ุงููุทููุฉ ุฑุฌุนูุงู ููู ูุฑุงุฌุนูุง ุฒูุฌูุงุ ูุฅููุง:", options: ["ุชุจูู ุจููููุฉ ูุจุฑู", "ุชุจูู ุจููููุฉ ุตุบุฑู", "ุชุธู ุฒูุฌุชู", "ุชุณุชุฃูู ุงูุนุฏุฉ"], answer: 1 },
            { q: "ููู ุชุฑุฌุน ุงููุทููุฉ ุจุงุฆูุงู ุจููููุฉ ุตุบุฑู ูุฒูุฌูุง ุงูุฃูู ุชุญุชุงุฌ ุฅูู:", options: ["ุฑุฌุนุฉ ุจุงูููู ููุท", "ุนูุฏ ูููุฑ ุฌุฏูุฏูู", "ุฒูุงุฌ ูู ุฑุฌู ุขุฎุฑ", "ุฅุฐู ุงููุงุถู"], answer: 1 },
            { q: "ุงููุฑุฃุฉ ุงูุชู ุทููุช ุซูุงุซ ูุฑุงุช ุชุจูู ุจููููุฉ:", options: ["ุตุบุฑู", "ูุจุฑู", "ูุง ุชุจูู", "ูุนููุฉ"], answer: 1 },
            { q: "ุงูุจููููุฉ ุงููุจุฑู ุชุนูู ุฃู ุงููุฑุฃุฉ:", options: ["ุชุญู ุจุนูุฏ ุฌุฏูุฏ", "ูุง ุชุญู ูุฒูุฌูุง ุญุชู ุชุชุฒูุฌ ุบูุฑู ูููุงุฑููุง", "ุชุญู ุจุนุฏ ุณูุฉ", "ุชุญู ุจุงูุงุณุชุบูุงุฑ"], answer: 1 },
            { q: "ุฑุถุง ุงูุฒูุฌุฉ ูู ุงูุฑุฌุนุฉ ุฃุซูุงุก ุงูุนุฏุฉ:", options: ["ุฑูู", "ุดุฑุท", "ูุณุชุญุจ", "ูุง ูุดุชุฑุท"], answer: 3 },
            { q: "ุทูุงู ุบูุฑ ุงููุฏุฎูู ุจูุง:", options: ["ุฑุฌุนู", "ุจุงุฆู ูุง ุนุฏุฉ ููุง", "ููู ุนุฏุฉ 3 ูุฑูุก", "ุณูู"], answer: 1 },
            { q: "ูู ููุงูุน ุตุญุฉ ุงูุฑุฌุนุฉ:", options: ["ุฃู ูููู ุงูุทูุงู ุฎูุนุงู (ุจุนูุถ)", "ุฃู ุชููู ุงูุทููุฉ ุงูุฃููู", "ุฃู ุชููู ุจุงูุนุฏุฉ", "ุฃู ุชููู ููุฌุฒุฉ"], answer: 0 },
            { q: "ุชุญุตู ุงูุฑุฌุนุฉ ุจู:", options: ["ุงูููู ููุท", "ุงููุนู ููุท", "ุงููููุ ุฃู ุงููุนู ุจููุฉ ุงูุฑุฌุนุฉ", "ุดููุฏ ููุท"], answer: 2 },
            { q: "ุฏููู ุงูุฑุฌุนุฉ ูููู ุชุนุงูู:", options: ["ููุง ุฌูุงุญ ุนููููุง", "ูุจุนููุชูู ุฃุญู ุจุฑุฏูู", "ุงูุทูุงู ูุฑุชุงู", "ูุฅู ุทูููุง ููุง ุชุญู ูู"], answer: 1 }
        ];

        // System Prompt for AI
        const AI_SYSTEM_PROMPT = `ุฃูุช ูุนูู ููู ูุชููู ูููุณุฑุ ุชุดุฑุญ ุฃุญูุงู (ุงูุฎูุนุ ุงูุทูุงูุ ุงูุฑุฌุนุฉ) ูุทูุงุจ ุงูุฌุงูุนุฉ ุจูุงุก ุนูู ุงูููู ุงูููุณุฑ. 
ุงุณุชุฎุฏู ูุบุฉ ุณููุฉุ ุฃุฏูุฉ ุดุฑุนูุฉ ูุงุถุญุฉุ ููุง ุชุฎุฑุฌ ุนู ูุฐู ุงูููุงุถูุน ุงูุซูุงุซุฉ. ุฅุฐุง ุณุฆูุช ุฎุงุฑุฌ ุงูููุถูุน ุงุนุชุฐุฑ ุจูุทู.`;


        // ==========================================
        // 2. UTILS & DB (ูุธุงุฆู ุงูุงุชุตุงู ูุญูุธ ุงูุจูุงูุงุช)
        // ==========================================
        const DB_KEY = 'fiqh_v1';
        const getRecords = () => JSON.parse(localStorage.getItem(DB_KEY) || '[]');
        const saveRecord = (rec) => { const r = getRecords(); r.push(rec); localStorage.setItem(DB_KEY, JSON.stringify(r)); };
        
        const API_KEY_LOC = 'anthropic_fiqh_key';
        const getApiKey = () => localStorage.getItem(API_KEY_LOC) || '';
        const saveApiKey = (k) => localStorage.setItem(API_KEY_LOC, k);

        const GS_URL_LOC = 'gs_fiqh_url';
        const getGsUrl = () => localStorage.getItem(GS_URL_LOC) || '';
        const saveGsUrl = (u) => localStorage.setItem(GS_URL_LOC, u);

        // ุฅุฑุณุงู ุงูุจูุงูุงุช ูุฌูุฌู ุดูุช (ููุณ ุงูููุทู ูู ููุฏู)
        const sendToSheets = async (rec) => {
            const url = getGsUrl();
            if(!url) return false;
            try {
                const params = new URLSearchParams();
                params.append('name', rec.name);
                params.append('section', rec.section);
                params.append('score', rec.score + '/20');
                params.append('grade', rec.score >= 18 ? 'A' : rec.score >= 15 ? 'B' : rec.score >= 12 ? 'C' : 'D');
                params.append('studyTime', rec.time);
                params.append('date', new Date().toLocaleDateString('ar-SA'));
                await fetch(url + '?' + params.toString(), { method: 'GET', mode: 'no-cors' });
                return true;
            } catch(e) { return false; }
        };

        // ==========================================
        // 3. ICONS
        // ==========================================
        const Icons = {
            Book: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>,
            Map: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>,
            Card: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>,
            Brain: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>,
            Star: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>,
            Lock: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
        };

        // ==========================================
        // 4. COMPONENTS
        // ==========================================

        const AIWidget = () => {
            const [open, setOpen] = React.useState(false);
            const [msgs, setMsgs] = React.useState([{r: 'bot', t: 'ูุฑุญุจุงู ุจู! ุฃูุง ูุณุงุนุฏู ูููู ุฃุญูุงู ุงูููุงุญ ูุงูุทูุงู. ุชูุถู ุจุณุคุงูู.'}]);
            const [inp, setInp] = React.useState('');
            const [loading, setLoading] = React.useState(false);
            const endRef = React.useRef(null);

            const send = async () => {
                if(!inp.trim() || loading) return;
                const userMsg = inp.trim();
                setInp('');
                setMsgs(prev => [...prev, {r: 'user', t: userMsg}]);
                setLoading(true);

                try {
                    const k = getApiKey();
                    if(!k) throw new Error("ุงููุนูู ูู ููู ุจุฅุนุฏุงุฏ ููุชุงุญ API ุจุนุฏ.");

                    const hist = msgs.slice(-4).map(m => ({
                        role: m.r === 'bot' ? 'assistant' : 'user',
                        content: m.t
                    }));

                    const res = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json', 'x-api-key': k,
                            'anthropic-version': '2023-06-01', 'anthropic-dangerous-direct-browser-access': 'true'
                        },
                        body: JSON.stringify({
                            model: 'claude-3-haiku-20240307', max_tokens: 500,
                            system: AI_SYSTEM_PROMPT,
                            messages: [...hist, {role: 'user', content: userMsg}]
                        })
                    });
                    
                    if(!res.ok) throw new Error("ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู");
                    const data = await res.json();
                    setMsgs(prev => [...prev, {r: 'bot', t: data.content[0].text}]);
                } catch(e) {
                    setMsgs(prev => [...prev, {r: 'bot', t: 'โ๏ธ ' + e.message}]);
                }
                setLoading(false);
            };

            React.useEffect(() => { endRef.current?.scrollIntoView({ behavior: "smooth" }); }, [msgs]);

            return (
                <div className="fixed bottom-4 left-4 z-50">
                    {!open && (
                        <button onClick={() => setOpen(true)} className="w-14 h-14 bg-navy text-gold rounded-full flex items-center justify-center shadow-lg animate-pulse-glow hover:scale-110 transition">
                            <Icons.Brain />
                        </button>
                    )}
                    {open && (
                        <div className="w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gold overflow-hidden animate-slide-up flex flex-col h-96">
                            <div className="bg-navy text-gold p-3 flex justify-between items-center">
                                <span className="font-bold font-amiri">ุงููุณุงุนุฏ ุงููููู</span>
                                <button onClick={() => setOpen(false)} className="text-white hover:text-red-400">โ</button>
                            </div>
                            <div className="flex-1 p-3 overflow-y-auto space-y-3 bg-creamy">
                                {msgs.map((m, i) => (
                                    <div key={i} className={`p-2 rounded-lg text-sm ${m.r==='bot' ? 'bg-white border border-gray-200 ml-8' : 'bg-navy text-white mr-8'}`}>
                                        {m.t}
                                    </div>
                                ))}
                                {loading && <div className="text-gray-400 text-xs text-center animate-pulse">ููุชุจ...</div>}
                                <div ref={endRef} />
                            </div>
                            <div className="p-2 bg-white border-t border-gray-200 flex gap-2">
                                <input value={inp} onChange={e=>setInp(e.target.value)} onKeyDown={e=>e.key==='Enter' && send()} placeholder="ุงุณุฃู ููุง..." className="flex-1 p-2 border rounded-lg text-sm outline-none focus:border-gold" />
                                <button onClick={send} className="bg-gold text-navy px-3 py-2 rounded-lg font-bold">โ</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const Dashboard = ({ onClose }) => {
            const [url, setUrl] = React.useState(getGsUrl());
            const [api, setApi] = React.useState(getApiKey());
            const [msg, setMsg] = React.useState('');
            const recs = getRecords().sort((a,b)=>b.ts-a.ts);

            const saveSettings = () => { saveGsUrl(url); saveApiKey(api); setMsg('ุชู ุงูุญูุธ ุจูุฌุงุญ!'); setTimeout(()=>setMsg(''), 2000); };
            const clearData = () => { if(confirm('ูุณุญ ูู ุงููุชุงุฆุฌุ')) { localStorage.removeItem(DB_KEY); onClose(); } };
            const expCsv = () => {
                let csv = 'ุงูุงุณู,ุงูุดุนุจุฉ,ุงูุฏุฑุฌุฉ,ุงูุชูุฏูุฑ,ุงูููุช,ุงูุชุงุฑูุฎ\n';
                recs.forEach(r => csv += `"${r.name}","${r.section}","${r.score}","${r.grade}","${r.time}","${r.date}"\n`);
                const a = document.createElement('a');
                a.href = URL.createObjectURL(new Blob(['\uFEFF'+csv], {type: 'text/csv;charset=utf-8'}));
                a.download = 'ูุชุงุฆุฌ_ุงูููู.csv'; a.click();
            };

            return (
                <div className="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4">
                    <div className="bg-navy w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl border border-gold p-6 text-white animate-slide-up">
                        <div className="flex justify-between items-center mb-6 border-b border-gray-700 pb-4">
                            <h2 className="text-2xl font-amiri text-gold">ููุญุฉ ุชุญูู ุงููุนูู</h2>
                            <button onClick={onClose} className="px-4 py-2 bg-red-900/50 text-red-300 rounded hover:bg-red-900">ุฅุบูุงู</button>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div className="bg-white/5 p-4 rounded-xl border border-white/10">
                                <h3 className="text-gold mb-2 font-bold">๐ ุฑุจุท Google Sheets</h3>
                                <input value={url} onChange={e=>setUrl(e.target.value)} placeholder="ุฑุงุจุท Web App" className="w-full p-2 rounded bg-black/30 border border-gray-600 mb-2 text-sm text-left dir-ltr" />
                            </div>
                            <div className="bg-white/5 p-4 rounded-xl border border-white/10">
                                <h3 className="text-gold mb-2 font-bold">๐ค ููุชุงุญ Anthropic API</h3>
                                <input type="password" value={api} onChange={e=>setApi(e.target.value)} placeholder="sk-ant-..." className="w-full p-2 rounded bg-black/30 border border-gray-600 mb-2 text-sm text-left dir-ltr" />
                            </div>
                        </div>
                        <div className="flex gap-4 mb-8">
                            <button onClick={saveSettings} className="bg-gold text-navy px-6 py-2 rounded font-bold hover:bg-yellow-500">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                            <span className="text-green-400 py-2">{msg}</span>
                        </div>

                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl text-gold">ูุชุงุฆุฌ ุงูุทูุงุจ ({recs.length})</h3>
                            <div className="flex gap-2">
                                <button onClick={expCsv} className="bg-blue-900/50 px-3 py-1 rounded text-sm text-blue-200">ุชุตุฏูุฑ CSV</button>
                                <button onClick={clearData} className="bg-red-900/50 px-3 py-1 rounded text-sm text-red-200">ูุณุญ ุงููู</button>
                            </div>
                        </div>

                        <div className="overflow-x-auto">
                            <table className="w-full text-sm text-right">
                                <thead className="bg-white/10 text-gold"><tr><th className="p-3">ุงูุงุณู</th><th className="p-3">ุงูุดุนุจุฉ</th><th className="p-3">ุงูุฏุฑุฌุฉ</th><th className="p-3">ุงูููุช</th><th className="p-3">ุงูุชุงุฑูุฎ</th></tr></thead>
                                <tbody>
                                    {recs.map((r, i) => (
                                        <tr key={i} className="border-b border-white/5 hover:bg-white/5">
                                            <td className="p-3">{r.name}</td><td className="p-3">{r.section}</td>
                                            <td className="p-3 font-bold">{r.score}/20 <span className={`text-xs px-2 rounded ${r.grade==='A'?'bg-green-900 text-green-200':r.grade==='B'?'bg-blue-900 text-blue-200':r.grade==='C'?'bg-yellow-900 text-yellow-200':'bg-red-900 text-red-200'}`}>{r.grade}</span></td>
                                            <td className="p-3">{r.time}</td><td className="p-3 text-xs opacity-70">{r.date}</td>
                                        </tr>
                                    ))}
                                    {recs.length === 0 && <tr><td colSpan="5" className="p-8 text-center text-gray-500">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุนุฏ</td></tr>}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [screen, setScreen] = React.useState('welcome');
            const [student, setStudent] = React.useState({ name: '', sec: '' });
            const [startTime, setStartTime] = React.useState(null);
            const [dashOpen, setDashOpen] = React.useState(false);

            const startSession = (name, sec) => { setStudent({name, sec}); setStartTime(Date.now()); setScreen('learn'); };
            const getFormattedTime = () => {
                if(!startTime) return '00:00';
                const secs = Math.floor((Date.now() - startTime) / 1000);
                return `${String(Math.floor(secs/60)).padStart(2,'0')}:${String(secs%60).padStart(2,'0')}`;
            };

            const NavBtn = ({ icon, text, target }) => (
                <button onClick={() => setScreen(target)} className={`flex flex-col items-center p-2 rounded-xl transition ${screen === target ? 'bg-gold text-navy shadow-md' : 'text-gray-500 hover:bg-gray-100'}`}>
                    {icon} <span className="text-xs mt-1 font-bold">{text}</span>
                </button>
            );

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    {screen !== 'welcome' && (
                        <header className="bg-navy text-white p-4 sticky top-0 z-40 shadow-lg border-b-4 border-gold flex justify-between items-center">
                            <div className="flex flex-col">
                                <span className="font-amiri text-gold text-lg">ุงูููู ุงูููุณุฑ</span>
                                <span className="text-xs text-gray-300">ุงูุฎูุน ูุงูุทูุงู</span>
                            </div>
                            <div className="flex gap-4 items-center">
                                <div className="text-right hidden sm:block">
                                    <div className="text-sm font-bold">{student.name}</div>
                                    <div className="text-xs text-gray-400">{student.sec}</div>
                                </div>
                                <div className="bg-black/40 px-3 py-1 rounded text-gold font-mono">{getFormattedTime()}</div>
                            </div>
                        </header>
                    )}

                    {/* Main Content */}
                    <main className="max-w-4xl mx-auto mt-6 px-4">
                        {screen === 'welcome' && <WelcomeScreen onStart={startSession} onDash={() => setDashOpen(true)} />}
                        {screen === 'learn' && <StepperScreen />}
                        {screen === 'map' && <MindMapScreen />}
                        {screen === 'review' && <ReviewScreen />}
                        {screen === 'nawazil' && <NawazilScreen />}
                        {screen === 'quiz' && <QuizScreen student={student} time={getFormattedTime()} />}
                    </main>

                    {/* Bottom Nav */}
                    {screen !== 'welcome' && screen !== 'quiz' && (
                        <nav className="fixed bottom-0 w-full bg-white border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-40 flex justify-around p-2">
                            <NavBtn icon={<Icons.Book />} text="ุงูุฏุฑุณ" target="learn" />
                            <NavBtn icon={<Icons.Map />} text="ุงูุฎุฑุงุฆุท" target="map" />
                            <NavBtn icon={<Icons.Card />} text="ุงููุฑุงุฌุนุฉ" target="review" />
                            <NavBtn icon={<Icons.Brain />} text="ุงูููุงุฒู" target="nawazil" />
                            <NavBtn icon={<Icons.Star />} text="ุงูุงุฎุชุจุงุฑ" target="quiz" />
                        </nav>
                    )}

                    <AIWidget />
                    {dashOpen && <Dashboard onClose={() => setDashOpen(false)} />}
                </div>
            );
        };

        // --- Screens ---

        const WelcomeScreen = ({ onStart, onDash }) => {
            const [n, setN] = React.useState('');
            const [s, setS] = React.useState('');
            const handleDash = () => { if(prompt('ูููุฉ ุงููุฑูุฑ:') === '1234') onDash(); else alert('ุฎุทุฃ'); };
            return (
                <div className="flex flex-col items-center justify-center min-h-[80vh] animate-fade-in">
                    <div className="glass-panel p-8 rounded-3xl w-full max-w-md text-center relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-gold/20 rounded-bl-full -z-10"></div>
                        <h1 className="text-4xl font-amiri text-navy mb-2">ุงูููู ุงูููุณุฑ</h1>
                        <h2 className="text-xl text-gold mb-8 font-bold">ุจุงุจ ุงูุฎูุน ูุงูุทูุงู</h2>
                        <input value={n} onChange={e=>setN(e.target.value)} placeholder="ุงูุงุณู ุงูุซูุงุซู" className="w-full mb-4 p-3 border-2 border-gray-200 rounded-xl focus:border-gold outline-none text-center" />
                        <input value={s} onChange={e=>setS(e.target.value)} placeholder="ุฑูู ุงูุดุนุจุฉ" className="w-full mb-6 p-3 border-2 border-gray-200 rounded-xl focus:border-gold outline-none text-center" />
                        <button onClick={() => {if(n&&s) onStart(n,s); else alert('ุฃุฏุฎู ุงูุจูุงูุงุช');}} className="w-full bg-navy text-white py-3 rounded-xl font-bold text-lg hover:bg-opacity-90 transition shadow-lg shadow-navy/30">ุจุฏุก ุงูุชุนูู</button>
                    </div>
                    <button onClick={handleDash} className="mt-8 text-gray-400 flex items-center gap-1 hover:text-navy text-sm"><Icons.Lock /> ููุญุฉ ุงูุฃุณุชุงุฐ</button>
                </div>
            );
        };

        const StepperScreen = () => {
            const [step, setStep] = React.useState(0);
            const t = TOPICS_DATA[step];
            const [ans, setAns] = React.useState('');
            const [done, setDone] = React.useState(false);

            React.useEffect(() => { setAns(''); setDone(false); }, [step]);

            return (
                <div className="animate-fade-in pb-10">
                    <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
                        {TOPICS_DATA.map((_, i) => (
                            <div key={i} onClick={()=>setStep(i)} className={`h-2 flex-1 rounded-full cursor-pointer transition-all ${i<=step ? 'bg-gold' : 'bg-gray-200'}`}></div>
                        ))}
                    </div>
                    <div className={`bg-${t.bg} rounded-3xl p-6 md:p-10 shadow-sm border border-gray-100`}>
                        <h2 className="text-2xl font-amiri text-navy mb-6 border-b-2 border-gold pb-2 inline-block">{t.title}</h2>
                        <div className="text-lg leading-relaxed">{t.content}</div>
                        
                        <div className="mt-8 p-6 bg-white rounded-2xl border border-gray-200 shadow-inner">
                            <h3 className="font-bold text-navy mb-4 flex items-center gap-2"><Icons.Star/> ูุดุงุท ุชูุงุนูู</h3>
                            {t.activity.type === 'fill' ? (
                                <div>
                                    <p className="mb-4">{t.activity.question.split('.....').map((p, i, a) => (
                                        <React.Fragment key={i}>
                                            {p}{i !== a.length-1 && <input className={`w-24 border-b-2 ${done?'border-green-500 bg-green-50':'border-gold'} text-center outline-none mx-2 font-bold text-navy`} disabled={done} value={ans} onChange={e=>setAns(e.target.value)} />}
                                        </React.Fragment>
                                    ))}</p>
                                    {!done && <button onClick={()=>{if(ans.trim()===t.activity.answer)setDone(true); else alert('ุญุงูู ูุฑุฉ ุฃุฎุฑู');}} className="bg-gold text-navy px-4 py-1 rounded shadow">ุชุญูู</button>}
                                    {done && <span className="text-green-600 font-bold">โ ุฃุญุณูุช!</span>}
                                </div>
                            ) : (
                                <div>
                                    <p className="mb-4 text-sm text-gray-500">ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ:</p>
                                    {t.activity.pairs.map((p, i) => (
                                        <div key={i} className="flex gap-4 mb-3 items-center">
                                            <div className="bg-gray-100 p-2 rounded flex-1 text-center font-bold">{p.q}</div>
                                            <button onClick={()=>setDone(true)} className={`p-2 rounded flex-1 border ${done?'bg-green-100 border-green-500':'border-gold hover:bg-gold/10'}`}>{p.a}</button>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                    <div className="flex justify-between mt-6">
                        <button disabled={step===0} onClick={()=>setStep(s=>s-1)} className="px-6 py-2 rounded-xl bg-gray-200 text-gray-600 disabled:opacity-50">ุงูุณุงุจู</button>
                        <button disabled={step===TOPICS_DATA.length-1} onClick={()=>setStep(s=>s+1)} className="px-6 py-2 rounded-xl bg-navy text-white disabled:opacity-50 shadow-md">ุงูุชุงูู</button>
                    </div>
                </div>
            );
        };

        const MindMapScreen = () => (
            <div className="animate-fade-in flex flex-col gap-8 pb-10 items-center">
                <div className="w-full max-w-2xl bg-white p-6 rounded-3xl shadow-sm border text-center">
                    <div className="map-root inline-block px-8 py-3 rounded-xl font-bold text-xl mb-8">ุงููุฑูุฉ ุจูู ุงูุฒูุฌูู</div>
                    <div className="flex justify-around relative pt-4 border-t-2 border-gold">
                        <div className="map-branch p-3 rounded-lg w-2/5">
                            <h3 className="font-bold text-navy">ุงูุฎูุน</h3>
                            <p className="text-xs text-gray-500 mt-2">ุนูุถ ูุงูู + ุจุงุฆูุฉ ูุง ุฑุฌุนุฉ ูููุง + ูุฌูุฒ ูู ุงูุญูุถ</p>
                        </div>
                        <div className="map-branch p-3 rounded-lg w-2/5">
                            <h3 className="font-bold text-navy">ุงูุทูุงู</h3>
                            <p className="text-xs text-gray-500 mt-2">ูุง ุนูุถ + ุฑุฌุนู ูุจุงุฆู + ูุง ูุฌูุฒ ูู ุงูุญูุถ</p>
                        </div>
                    </div>
                </div>
                
                <div className="w-full max-w-2xl bg-white p-6 rounded-3xl shadow-sm border text-center">
                    <div className="map-root inline-block px-8 py-3 rounded-xl font-bold text-xl mb-8">ุฃูุณุงู ุงูุทูุงู</div>
                    <div className="flex justify-around relative pt-4 border-t-2 border-gold">
                        <div className="map-branch p-3 rounded-lg w-[30%]">
                            <h3 className="font-bold text-green-700">ุณูู</h3>
                            <p className="text-xs text-gray-500 mt-2">ุทููุฉ ูุงุญุฏุฉุ ูู ุทูุฑ ูู ูุฌุงูุนูุง ููู</p>
                        </div>
                        <div className="map-branch p-3 rounded-lg w-[30%]">
                            <h3 className="font-bold text-red-700">ุจุฏุนู</h3>
                            <p className="text-xs text-gray-500 mt-2">ูู ุงูุญูุถุ ุฃู ุทูุฑ ุฌุงูุน ูููุ ุฃู ุซูุงุซ ุจููุธ ูุงุญุฏ</p>
                        </div>
                        <div className="map-branch p-3 rounded-lg w-[30%]">
                            <h3 className="font-bold text-navy">ุงูููุธ</h3>
                            <p className="text-xs text-gray-500 mt-2">ุตุฑูุญ (ูุง ูุญุชุงุฌ ููุฉ)<br/>ููุงูุฉ (ูุญุชุงุฌ ููุฉ)</p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const ReviewScreen = () => {
            const [mode, setMode] = React.useState('cards');
            const [openQ, setOpenQ] = React.useState(null);

            return (
                <div className="animate-fade-in pb-10">
                    <div className="flex justify-center gap-4 mb-8">
                        <button onClick={()=>setMode('cards')} className={`px-6 py-2 rounded-full font-bold transition ${mode==='cards'?'bg-navy text-gold shadow-md':'bg-gray-200 text-gray-600'}`}>ุงูุจุทุงูุงุช</button>
                        <button onClick={()=>setMode('qa')} className={`px-6 py-2 rounded-full font-bold transition ${mode==='qa'?'bg-navy text-gold shadow-md':'bg-gray-200 text-gray-600'}`}>ุงูุฃุณุฆูุฉ ุงูููุงููุฉ</button>
                    </div>

                    {mode === 'cards' && (
                        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                            {FLASHCARDS.map((c, i) => {
                                const [flip, setFlip] = React.useState(false);
                                return (
                                    <div key={i} className={`flip-card ${flip ? 'flipped' : ''}`} onClick={() => setFlip(!flip)}>
                                        <div className="flip-card-inner">
                                            <div className="flip-card-front">{c.front}</div>
                                            <div className="flip-card-back">{c.back}</div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    )}

                    {mode === 'qa' && (
                        <div className="space-y-4">
                            {ESSAY_QUESTIONS.map((q, i) => (
                                <div key={i} className={`rounded-2xl overflow-hidden border ${i%2===0 ? 'border-gold' : 'border-navy'}`}>
                                    <button onClick={()=>setOpenQ(openQ===i?null:i)} className={`w-full text-right p-4 font-bold ${i%2===0 ? 'bg-gold/10 text-navy' : 'bg-navy text-white'} flex justify-between`}>
                                        <span>{q.q}</span> <span>{openQ===i ? 'โ' : '+'}</span>
                                    </button>
                                    {openQ === i && <div className="p-4 bg-white text-gray-700 leading-relaxed border-t">{q.a}</div>}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const NawazilScreen = () => {
            const [sc, setSc] = React.useState('');
            const [ans, setAns] = React.useState('');
            const [fb, setFb] = React.useState(null);
            const [loading, setLoading] = React.useState(false);

            const genScenario = async () => {
                setLoading(true); setFb(null); setAns(''); setSc('');
                try {
                    const k = getApiKey(); if(!k) throw new Error("ููุชุงุญ API ุบูุฑ ูุชููุฑ.");
                    const res = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST', headers: { 'Content-Type': 'application/json', 'x-api-key': k, 'anthropic-version': '2023-06-01', 'anthropic-dangerous-direct-browser-access': 'true' },
                        body: JSON.stringify({ model: 'claude-3-haiku-20240307', max_tokens: 300, system: 'ุฃูุช ุตุงูุน ููุงุฒู ููููุฉ.', messages: [{role: 'user', content: 'ุงูุชุจ ูุตุฉ ูุตูุฑุฉ ุฌุฏุง (ุณุทุฑูู) ูุงูุนูุฉ ุชูุซู ูุงุฒูุฉ ููููุฉ ูู ุงูุทูุงู ุฃู ุงูุฎูุน ุฃู ุงูุฑุฌุนุฉุ ุชูุชูู ุจุณุคุงู: ูุง ุงูุญูู ุงููููู ููุง ูุน ุงูุชุนูููุ'}] })
                    });
                    const d = await res.json(); setSc(d.content[0].text);
                } catch(e) { setSc("ุญุฏุซ ุฎุทุฃ. ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ุงููุนูู ูููุชุงุญ ุงูุฐูุงุก ุงูุงุตุทูุงุนู."); }
                setLoading(false);
            };

            const evalAns = async () => {
                if(!ans.trim()) return;
                setLoading(true);
                try {
                    const k = getApiKey();
                    const res = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST', headers: { 'Content-Type': 'application/json', 'x-api-key': k, 'anthropic-version': '2023-06-01', 'anthropic-dangerous-direct-browser-access': 'true' },
                        body: JSON.stringify({ model: 'claude-3-haiku-20240307', max_tokens: 300, system: 'ุฃูุช ูุตุญุญ ูููู. ุตุญุญ ุฅุฌุงุจุฉ ุงูุทุงูุจ ุจูุงุก ุนูู ุงูููู ุงูููุณุฑ ุจูุทู ูุฅูุฌุงุฒ.', messages: [{role: 'user', content: `ุงููุงุฒูุฉ: ${sc}\nุฅุฌุงุจุฉ ุงูุทุงูุจ: ${ans}\nุตุญุญ ุงูุฅุฌุงุจุฉ.`}] })
                    });
                    const d = await res.json(); setFb(d.content[0].text);
                } catch(e) { setFb("ุชุนุฐุฑ ุงูุชุตุญูุญ ุงูุขูู."); }
                setLoading(false);
            };

            return (
                <div className="animate-fade-in max-w-2xl mx-auto pb-10">
                    <div className="bg-navy text-white p-8 rounded-t-3xl text-center">
                        <h2 className="text-3xl font-amiri text-gold mb-2">ูุฎุชุจุฑ ุงูููุงุฒู</h2>
                        <p className="opacity-80">ูููุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุตุฉ ููููุฉ ูุชุฎุชุจุฑ ูุฏุฑุชู ุนูู ุงูุงุณุชูุจุงุท</p>
                    </div>
                    <div className="bg-white p-6 rounded-b-3xl shadow-lg border border-gray-100">
                        {!sc && <button onClick={genScenario} disabled={loading} className="w-full bg-gold text-navy py-4 rounded-xl font-bold text-lg hover:bg-yellow-500 shadow-md flex justify-center">{loading ? 'ูุชู ุงูุชูููุฏ...' : 'ุชูููุฏ ูุงุฒูุฉ ุฌุฏูุฏุฉ'}</button>}
                        {sc && (
                            <div className="space-y-6 animate-slide-up">
                                <div className="bg-blue-50 p-4 rounded-xl border-r-4 border-navy text-lg leading-relaxed">{sc}</div>
                                <textarea value={ans} onChange={e=>setAns(e.target.value)} placeholder="ุงูุชุจ ุญููู ุงููููู ููุง..." className="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-gold h-32 outline-none resize-none"></textarea>
                                {!fb && <button onClick={evalAns} disabled={loading||!ans} className="w-full bg-navy text-gold py-3 rounded-xl font-bold hover:opacity-90 disabled:opacity-50">{loading ? 'ุฌุงุฑู ุงูุชุตุญูุญ...' : 'ุนุฑุถ ุงูุฅุฌุงุจุฉ ุนูู ุงููุนูู ุงูุขูู'}</button>}
                                {fb && (
                                    <div className="bg-green-50 p-4 rounded-xl border-r-4 border-green-500 animate-fade-in">
                                        <h4 className="font-bold text-green-800 mb-2">ุงูุชุตุญูุญ:</h4>
                                        <p className="leading-relaxed">{fb}</p>
                                        <button onClick={()=>{setSc('');setFb(null);}} className="mt-4 text-sm text-navy underline">ุฌุฑุจ ูุงุฒูุฉ ุฃุฎุฑู</button>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const QuizScreen = ({ student, time }) => {
            const [qIdx, setQIdx] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [done, setDone] = React.useState(false);
            const [sending, setSending] = React.useState(false);
            const q = QUIZ_QUESTIONS[qIdx];

            const handleAns = (i) => {
                if(i === q.answer) setScore(s => s+1);
                if(qIdx < QUIZ_QUESTIONS.length - 1) setTimeout(() => setQIdx(qIdx + 1), 500);
                else finishQuiz(i === q.answer ? score + 1 : score);
            };

            const finishQuiz = async (finalScore) => {
                setDone(true); setSending(true);
                const rec = { name: student.name, section: student.sec, score: finalScore, time: time, date: new Date().toLocaleDateString('ar-SA'), ts: Date.now(), grade: finalScore>=18?'A':finalScore>=15?'B':finalScore>=12?'C':'D' };
                saveRecord(rec);
                await sendToSheets(rec);
                setSending(false);
            };

            if(done) return (
                <div className="text-center animate-fade-in py-10">
                    <div className="w-32 h-32 mx-auto rounded-full border-8 border-gold flex items-center justify-center mb-6">
                        <span className="text-4xl font-amiri text-navy font-bold">{score}/20</span>
                    </div>
                    <h2 className="text-2xl font-bold text-navy mb-2">{score >= 12 ? 'ูุจุงุฑู! ุงุฌุชุฒุช ุงูุงุฎุชุจุงุฑ' : 'ุนููู ุงููุฑุงุฌุนุฉ ูุฑุฉ ุฃุฎุฑู'}</h2>
                    <p className="text-gray-500 mb-8">{sending ? 'ุฌุงุฑู ุฅุฑุณุงู ุงููุชูุฌุฉ ููุฃุณุชุงุฐ...' : 'ุชู ุชุณุฌูู ูุชูุฌุชู ุจูุฌุงุญ'}</p>
                </div>
            );

            return (
                <div className="animate-fade-in max-w-xl mx-auto">
                    <div className="flex justify-between text-sm text-gray-500 mb-2 font-bold">
                        <span>ุงูุณุคุงู {qIdx + 1} ูู 20</span>
                        <span>ุงูุฏุฑุฌุฉ: {score}</span>
                    </div>
                    <div className="w-full bg-gray-200 h-2 rounded-full mb-8"><div className="bg-gold h-2 rounded-full transition-all" style={{width: `${((qIdx)/20)*100}%`}}></div></div>
                    
                    <div className="bg-white p-8 rounded-3xl shadow-md border border-gray-100 min-h-[300px] flex flex-col justify-center">
                        <h3 className="text-xl font-amiri text-navy mb-8 text-center leading-relaxed">{q.q}</h3>
                        <div className="space-y-3">
                            {q.options.map((opt, i) => (
                                <button key={i} onClick={() => handleAns(i)} className="w-full p-4 text-right rounded-xl border-2 border-gray-100 hover:border-gold hover:bg-gold/5 transition font-medium text-gray-700">
                                    {opt}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>